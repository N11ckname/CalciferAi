# CalciferAi - Contexte du Projet

#AI General rules
- RÃ©pond de maniÃ¨re assez concise aux questions
- Ne crÃ©e pas de documentation sice n'est pas explicitement demandÃ©!

## ğŸ“‹ Description GÃ©nÃ©rale
CalciferAi est un systÃ¨me de contrÃ´le intelligent de four cÃ©ramique basÃ© sur Arduino avec simulation Python.

### Contexte :
- PrÃ©parer les Ã©lÃ©ments pour un novice qui ne connait pas le codage
- Ne pas crÃ©er de nombreux fichiers d'aide, de dÃ©marrage... faire simple et concis dans un seul fichier pour les notices et aides.
- Ne met pas Ã  jour TEST_MODE et Simulator si ce n'est pas demandÃ© explicitement.
### Composants principaux :
- **lucia/** : Code Arduino (contrÃ´leur rÃ©el) pour Arduino Uno avec affichage OLED SH1106
- **simulator/** : Simulateur Python complet avec interface graphique Pygame
- **TEST_MODE/** : Outils de diagnostic et de test matÃ©riel

## ğŸ¯ Architecture du Projet

### Code Arduino (lucia/)
- **Plateforme** : Arduino Uno (ATmega328P)
- **Affichage** : OLED SH1106 128x64 pixels (I2C)
- **Capteur** : MAX31856 avec thermocouple Type S
- **Interface** : Encodeur rotatif + boutons
- **ContrÃ´le** : Relais SSR avec PWM logiciel
- **Langage** : C++ pour Arduino

## ğŸ”§ Contraintes Techniques

### Arduino
- **MÃ©moire programme** : Maximum 31 232 octets (Uno)
- **RAM** : Seulement 2048 octets â†’ OPTIMISATION CRITIQUE
- **Timing** : Utiliser UNIQUEMENT millis(), JAMAIS delay()
- **EEPROM** : Sauvegarde limitÃ©e (100 000 cycles) â†’ sauvegarder uniquement Ã  la sortie d'Ã©dition
- **Non-bloquant** : Tout le code doit Ãªtre non-bloquant

5.2, Matplotlib 3.8.2, NumPy 1.26.2

## âœï¸ Conventions de Code

### GÃ©nÃ©ral
- **Commentaires** : TOUJOURS en franÃ§ais
- **Noms de variables** : Anglais technique acceptable, mais privilÃ©gier le franÃ§ais pour la clartÃ©
- **Documentation** : Fichiers .md en franÃ§ais
- **ClartÃ© > Concision** : Code lisible et bien documentÃ©

### Arduino (C++)
- **Variables globales** : Minimiser pour Ã©conomiser la RAM
- **Strings** : Utiliser F() macro pour stocker en Flash (ex: `F("Texte")`)
- **Debug** : Ã‰viter Serial.print en production (coÃ»te de la RAM)

### Python
- **Style** : snake_case pour fonctions (ex: `update_display()`)
- **Type hints** : EncouragÃ©s pour clartÃ©
- **Docstrings** : En franÃ§ais, format Google

## ğŸ›¡ï¸ RÃ¨gles de SÃ©curitÃ©

### CRITIQUE - Ne JAMAIS oublier :
1. **Relais OFF en mode PROG_OFF** : SÃ©curitÃ© essentielle
2. **ArrÃªt automatique** : Si erreur thermocouple > 2 minutes
3. **Limite de changement** : PID max 10% par cycle
4. **Bouton d'urgence** : ArrÃªt immÃ©diat Ã  tout moment
5. **Validation** : Tester TOUJOURS sans four connectÃ© d'abord

